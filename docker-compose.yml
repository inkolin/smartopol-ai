services:
  gateway:
    build:
      context: .
      target: dev
    restart: unless-stopped
    ports:
      - "${SKYNET_PORT:-18789}:18789"
    environment:
      # Auth token for WebSocket/HTTP API access
      SKYNET_GATEWAY_AUTH_TOKEN: ${SKYNET_AUTH_TOKEN:-change-me-in-production}
      # LLM provider keys (uncomment the ones you use)
      SKYNET_PROVIDERS_ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY:-}
      SKYNET_PROVIDERS_OPENAI_API_KEY: ${OPENAI_API_KEY:-}
      # Agent model (default: claude-sonnet-4-6)
      SKYNET_AGENT_MODEL: ${SKYNET_MODEL:-claude-sonnet-4-6}
      # Discord bot (optional)
      SKYNET_CHANNELS_DISCORD_BOT_TOKEN: ${DISCORD_BOT_TOKEN:-}
    volumes:
      - skynet-data:/home/skynet/.skynet
      # Optional: bind-mount a custom config file
      # - ./skynet.toml:/home/skynet/.skynet/skynet.toml:ro
      # Optional: bind-mount a custom SOUL.md
      # - ./SOUL.md:/home/skynet/.skynet/SOUL.md:ro
    # Uncomment for local LLM (Ollama running on host)
    # extra_hosts:
    #   - "host.docker.internal:host-gateway"

volumes:
  skynet-data:
